{#{% load static %}#}
{##}
{#<!DOCTYPE html>#}
{#<html>#}
{#<head>#}
{#    <title>Login Page</title>#}
{#    <link rel="stylesheet" type="text/css" href="{% static 'login.css' %}">#}
{#    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap.min.css' %}">#}
{#</head>#}
{#<body>#}
{##}
{#<div class="login-container">#}
{#    <h2>登 录</h2>#}
{#    <form action="/login/" method="post">#}
{#        {% csrf_token %}#}
{##}
{#        <label for="username">学工号</label>#}
{#        <input type="text" id="username" name="user" placeholder="输入8位学工号" value="{{ form.0 }}" required>#}
{##}
{#        <br>#}
{##}
{#        <label for="password">密码</label>#}
{#        <input type="password" id="password" name="pwd" placeholder="输入密码" value="{{ form.1 }}" required>#}
{#        <input type="checkbox" id="showPassword" style="display: inline-block;">#}
{#        <label for="showPassword" style="display: inline-block;">显示密码</label>#}
{#        <script>#}
{#            // 在页面加载完成后检查err_msg是否为空#}
{#            window.onload = function () {#}
{#                var err_msg = "{{ err_msg }}";#}
{#                if (err_msg) {#}
{#                    alert(err_msg); // 弹窗显示错误消息#}
{#                }#}
{#            }#}
{#        </script>#}
{# 功能按钮 #}
{#        <div class="button-container">#}
{#            <input type="submit" value="登录">#}
{#            <a type="submit" href="/register/">注册</a>#}
{#            <a type="submit" href="/login/resetpwd/">忘记密码</a>#}
{#        </div>#}
{##}
{#        <script>#}
{#            const passwordInput = document.getElementById('password');#}
{#            const showPasswordCheckbox = document.getElementById('showPassword');#}
{##}
{#            showPasswordCheckbox.addEventListener('change', function () {#}
{#                if (showPasswordCheckbox.checked) {#}
{#                    passwordInput.type = 'text'; // 显示密码#}
{#                } else {#}
{#                    passwordInput.type = 'password'; // 隐藏密码#}
{#                }#}
{#            });#}
{#        </script>#}
{#    </form>#}
{#</div>#}
{##}
{#</body>#}
{#</html>#}

{% load static %}

<!DOCTYPE html>
<html>
<head>
    <title>登录</title>
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap.min.css' %}">
    <style>
        body {
            {#background-image: linear-gradient(to left, #d9edf7, #d5d5d5);#}
            {#display: flex;#}
            {#justify-content: center;#}
            {#align-items: center;#}
            {#height: 100vh;#}
            background-image: url('{% static 'bg.jpg' %}');
            background-size: cover;
        }

        .box {
            backdrop-filter: blur(10px) brightness(103%);
            box-shadow: -3px 3px 15px  #adadad;
            border-radius: 15px;
            border: none;
        }
    </style>
</head>
<body>

<div class="container table-bordered box col-sm-6 col-sm-offset-3" style="margin-top: 100px;">
    <fieldset class="col-md-12">
        <legend><h2 class="text-center"><b>登录校园巴士</b></h2></legend>
        <form class="form-horizontal" role="form" action="/login/" method="post">
            {% csrf_token %}
            <div class="form-group">
                {#                <label for="c_id" class="col-sm-2 control-label">学工号</label>#}
                <div class="col-sm-6 col-sm-offset-3">
                    <input type="text" class="form-control" name="c_id" id="c_id" placeholder="学工号"
                           value="{{ c_id }}">
                </div>
            </div>
            <div class="form-group">
                {#                <label for="c_pwd" class="col-sm-2 control-label">密码</label>#}
                <div class="col-sm-6 col-sm-offset-3">
                    <input type="password" class="form-control" name="c_pwd" id="c_pwd" placeholder="密码"
                           value="{{ c_pwd }}">
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-2 col-sm-offset-3">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="showPassword"><b>显示密码</b>
                        </label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-6 col-sm-offset-3">
                    <button type="submit" class="btn btn-primary btn-block">登录</button>
                    <a type="submit" class="btn btn-primary btn-block" href="/register/">注册</a>
                    <div style="margin-top: 10px">
                        <a type="submit" href="/login/resetpwd/" style="text-decoration: none;">
                            <b>忘记密码</b>
                        </a>
                    </div>
                </div>
            </div>
            <script>
                // 在页面加载完成后检查err_msg是否为空
                window.onload = function () {
                    var err_msg = "{{ err_msg }}";
                    if (err_msg) {
                        alert(err_msg); // 弹窗显示错误消息
                    }
                }
            </script>

            <script>
                const passwordInput = document.getElementById('c_pwd');
                {#const passwordSure = document.getElementById('confirm');#}
                const showPasswordCheckbox = document.getElementById('showPassword');

                showPasswordCheckbox.addEventListener('change', function () {
                    if (showPasswordCheckbox.checked) {
                        passwordInput.type = 'text';
                        {#passwordSure.type = 'text'; // 显示密码#}
                    } else {
                        passwordInput.type = 'password';
                        {#passwordSure.type = 'password'; // 隐藏密码#}
                    }
                });
            </script>
        </form>
    </fieldset>
</div>

</body>
</html>
